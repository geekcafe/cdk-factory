{
  "cdk": {
    "parameters": [
      {
        "placeholder": "{{ENVIRONMENT}}",
        "env_var_name": "ENVIRONMENT",
        "cdk_parameter_name": "Environment"
      },
      {
        "placeholder": "{{WORKLOAD_NAME}}",
        "env_var_name": "CDK_WORKLOAD_NAME",
        "cdk_parameter_name": "WorkloadName"
      },
      {
        "placeholder": "{{CDK_SYNTH_COMMAND_FILE}}",
        "value": "./commands/cdk_synth.sh",
        "cdk_parameter_name": "CdkSynthCommandFile"
      },
      {
        "placeholder": "{{AWS_ACCOUNT}}",
        "env_var_name": "AWS_ACCOUNT_NUMBER",
        "cdk_parameter_name": "AccountNumber"
      },
      {
        "placeholder": "{{DEVOPS_AWS_ACCOUNT}}",
        "env_var_name": "DEVOPS_AWS_ACCOUNT",
        "cdk_parameter_name": "AccountNumber"
      },
      {
        "placeholder": "{{DEVOPS_REGION}}",
        "env_var_name": "DEVOPS_REGION",
        "cdk_parameter_name": "AccountRegion"
      },
      {
        "placeholder": "{{CODE_REPOSITORY_NAME}}",
        "env_var_name": "CODE_REPOSITORY_NAME",
        "cdk_parameter_name": "CodeRepoName"
      },
      {
        "placeholder": "{{CODE_REPOSITORY_ARN}}",
        "env_var_name": "CODE_REPOSITORY_ARN",
        "cdk_parameter_name": "CodeRepoArn"
      },
      {
        "placeholder": "{{GIT_BRANCH}}",
        "env_var_name": "GIT_BRANCH",
        "cdk_parameter_name": "GitBranch"
      },
      {
        "placeholder": "{{VPC_ID}}",
        "env_var_name": "VPC_ID",
        "cdk_parameter_name": "VpcId",
        "required": false
      },
      {
        "placeholder": "{{ALB_SECURITY_GROUP_ID}}",
        "env_var_name": "ALB_SECURITY_GROUP_ID",
        "cdk_parameter_name": "AlbSecurityGroupId",
        "required": false
      }
    ]
  },
  "workload": {
    "name": "abc-workload",
    "description": "AWS Infrastructure for abc-workload",
    "devops": {
      "account": "123456789012",
      "region": "us-east-1",
      "code_repository": {
        "name": "geekcafe/abc-workload-iac",
        "type": "connector_arn",
        "connector_arn": "arn:aws:codeconnections:us-east-1:123456789012:connection/a90857d9-89b8-4823-ad6f-69a335c20414"
      },
      "commands": [
        {
          "name": "cdk_synth",
          "commands": [],
          "file": "./commands/cdk_synth.sh"
        }
      ]
    },
    "ssm_prefix_template": "/abc-workload/dev/{resource_type}/{attribute}",
    "stacks": [
      {
        "name": "abc-workload-dev-vpc",
        "module": "vpc_library_module",
        "enabled": true,
        "vpc": {
          "name": "abc-workload-dev-vpc",
          "description": "VPC for abc-workload dev environment",
          "public_subnet_name": "abc-workload-dev-web-tier",
          "private_subnet_name": "abc-workload-dev-app-tier",
          "isolated_subnet_name": "abc-workload-dev-data-tier",
          "cidr": "10.0.0.0/16",
          "max_azs": 2,
          "nat_gateways": {
            "count": 1
          },
          "public_subnets": true,
          "private_subnets": true,
          "isolated_subnets": true,
          "enable_s3_endpoint": true,
          "enable_interface_endpoints": true,
          "interface_endpoints": [
            "ecr.api",
            "ecr.dkr",
            "logs",
            "ssm",
            "secretsmanager"
          ],
          "tags": {
            "Application": "abc-workload",
            "Environment": "dev"
          },
          "ssm_exports": {
            "vpc_id": "dev/abc-workload/vpc/id",
            "vpc_cidr": "dev/abc-workload/vpc/cidr",
            "public_subnet_ids": "dev/abc-workload/vpc/public-subnet-ids",
            "private_subnet_ids": "dev/abc-workload/vpc/private-subnet-ids",
            "isolated_subnet_ids": "dev/abc-workload/vpc/isolated-subnet-ids"
          }
        }
      }
    ],
    "deployments": [
      {
        "name": "abc-workload-dev-vpc-pipeline",
        "environment": "dev",
        "account": "123456789012",
        "region": "us-east-1",
        "mode": "pipeline",
        "pipeline": {
          "name": "abc-workload-dev-vpc-pipeline",
          "branch": "main",
          "enabled": true,
          "stages": [
            {
              "name": "Deploy-VPC",
              "stacks": [
                "abc-workload-dev-vpc"
              ]
            }
          ]
        },
        "enabled": true
      }
    ]
  }
}